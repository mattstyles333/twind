<section class="py-8 bg-white">
  <div class="mx-auto max-w-7xl">
    <div class="mb-6 text-center">
      <h2 class="text-2xl font-bold text-gray-900 md:text-3xl">Featured Designer Brands</h2>
      <p class="mt-2 text-gray-600">Discover premium eyewear from the world's most prestigious brands</p>
    </div>

    <div x-data="{
      expanded: false,
      expandedTwice: false,
      toggleExpanded() {
        if (!this.expanded) {
          this.expanded = true;
        } else if (!this.expandedTwice) {
          this.expandedTwice = true;
        } else {
          this.expanded = false;
          this.expandedTwice = false;
        }
      }
    }">

      <!-- First Row - Always Visible (6 brands) -->
      <div class="flex justify-center gap-6 mb-8">
        {{ range $i, $brand := .brands }}
        {{ if le $i 5 }}
        <a
          href="{{ $brand.url }}"
          class="block w-56 h-28 p-6 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md transition-all duration-200 group flex items-center justify-center"
        >
          <img
            src="{{ $brand.logo }}"
            alt="{{ $brand.name }}"
            class="max-w-full max-h-full object-contain transition-transform duration-200 group-hover:scale-105"
          />
        </a>
        {{ end }}
        {{ end }}
      </div>

      <!-- Second Row - First Expansion (6 brands) -->
      <div
        class="overflow-hidden transition-all duration-300 ease-in-out"
        x-ref="firstExpandedContainer"
        x-bind:style="expanded ? 'max-height: ' + $refs.firstExpandedContainer.scrollHeight + 'px' : 'max-height: 0px'"
      >
        <div class="flex justify-center gap-6 mb-8">
          {{ range $i, $brand := .brands }}
          {{ if and (gt $i 5) (le $i 11) }}
          <a
            href="{{ $brand.url }}"
            class="block w-56 h-28 p-6 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md transition-all duration-200 group flex items-center justify-center"
          >
            <img
              src="{{ $brand.logo }}"
              alt="{{ $brand.name }}"
              class="max-w-full max-h-full object-contain transition-transform duration-200 group-hover:scale-105"
            />
          </a>
          {{ end }}
          {{ end }}
        </div>
      </div>

      <!-- Third Row - Second Expansion Row 1 (6 brands) -->
      <div
        class="overflow-hidden transition-all duration-300 ease-in-out"
        x-ref="secondExpandedContainer"
        x-bind:style="expandedTwice ? 'max-height: ' + $refs.secondExpandedContainer.scrollHeight + 'px' : 'max-height: 0px'"
      >
        <div class="flex justify-center gap-6 mb-8">
          {{ range $i, $brand := .brands }}
          {{ if and (gt $i 11) (le $i 17) }}
          <a
            href="{{ $brand.url }}"
            class="block w-56 h-28 p-6 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md transition-all duration-200 group flex items-center justify-center"
          >
            <img
              src="{{ $brand.logo }}"
              alt="{{ $brand.name }}"
              class="max-w-full max-h-full object-contain transition-transform duration-200 group-hover:scale-105"
            />
          </a>
          {{ end }}
          {{ end }}
        </div>
      </div>

      <!-- Fourth Row - Second Expansion Row 2 (6 brands) -->
      <div
        class="overflow-hidden transition-all duration-300 ease-in-out"
        x-ref="thirdExpandedContainer"
        x-bind:style="expandedTwice ? 'max-height: ' + $refs.thirdExpandedContainer.scrollHeight + 'px' : 'max-height: 0px'"
      >
        <div class="flex justify-center gap-6 mb-8">
          {{ range $i, $brand := .brands }}
          {{ if and (gt $i 17) (le $i 23) }}
          <a
            href="{{ $brand.url }}"
            class="block w-56 h-28 p-6 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:shadow-md transition-all duration-200 group flex items-center justify-center"
          >
            <img
              src="{{ $brand.logo }}"
              alt="{{ $brand.name }}"
              class="max-w-full max-h-full object-contain transition-transform duration-200 group-hover:scale-105"
            />
          </a>
          {{ end }}
          {{ end }}
        </div>
      </div>

      <!-- Show More/Less Button and View All Brands Link -->
      {{ if gt (len .brands) 6 }}
      <div class="mt-8 text-center">
        <div class="flex flex-col items-center gap-4">
          <!-- Button -->
          <button
            type="button"
            @click="toggleExpanded()"
            class="flex justify-center items-center px-2 w-48 h-12 mx-auto rounded-lg border transition-all duration-200 bg-s border-s hover:bg-black group"
          >
            <span x-show="!expanded" class="text-sm font-semibold text-white transition-all duration-200 group-hover:text-white">
              Show More Brands
            </span>
            <span x-show="expanded && !expandedTwice" class="text-sm font-semibold text-white transition-all duration-200 group-hover:text-white">
              Show More Brands
            </span>
            <span x-show="expandedTwice" class="text-sm font-semibold text-white transition-all duration-200 group-hover:text-white">
              Show Less
            </span>
          </button>

          <!-- View All Brands Link - Only visible when fully expanded -->
          <div
            class="overflow-hidden transition-all duration-300 ease-in-out"
            x-ref="viewAllLinkContainer"
            x-bind:style="expandedTwice ? 'max-height: ' + $refs.viewAllLinkContainer.scrollHeight + 'px' : 'max-height: 0px'"
          >
            <a
              href="#brands-a-z"
              class="inline-flex items-center text-lg font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200 group"
            >
              <span>View All Brands</span>
              <svg class="ml-2 w-5 h-5 transition-transform duration-200 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>

          <!-- Count Display -->
          <div class="text-sm text-gray-500">
            <span x-show="!expanded">Showing 6 of 6 brands</span>
            <span x-show="expanded && !expandedTwice">Showing 12 of 12 brands</span>
            <span x-show="expandedTwice">Showing 24 of 24 brands</span>
          </div>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
