<!-- Desktop Navigation Layout -->
<div class="grid grid-cols-3 gap-x-3">
  {{ range $index, $section := .megamenu.sections }}
  <div class="space-y-0.5">
    <!-- Section Header -->
    {{ if and (ne $section.title "Glasses") (ne $section.title "Shop by Brand") (ne $section.title "Shop by lens") }}
    <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1">
      {{ $section.title }}
    </h3>
    {{ else }}
    <!-- Minimal spacer for sections without header -->
    <div class="h-1"></div>
    {{ end }}

    <!-- Section Links -->
    <nav class="space-y-0.5" role="navigation" aria-label="{{ $section.title }} navigation">
      {{ range $section.links }}
      <a
        href="{{ .url | safeHTML }}"
        class="group flex items-center gap-2 py-1 text-base transition-all duration-200 {{ if or (eq .text "Shop Mens") (eq .text "Shop Womens") }}font-bold text-gray-800 hover:text-blue-800{{ else }}font-medium text-gray-600 hover:text-gray-800{{ end }}"
        aria-label="Navigate to {{ .text }}"
      >
        <span>{{ .text }}</span>
        {{ if .popular }}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
          Popular
        </span>
        {{ end }}

        <!-- Arrow for primary navigation -->
        {{ if or (eq .text "Shop Mens") (eq .text "Shop Womens") }}
        <svg
          class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-1"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          aria-hidden="true"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
        {{ end }}

        <!-- Special icon for CTA links -->
        {{ if or (eq .text "Home trial") (eq .text "View all designers") (eq .text "Explore more") }}
        <svg
          class="w-4 h-4 transition-transform duration-200 group-hover:scale-110"
          fill="currentColor"
          viewBox="0 0 20 20"
          aria-hidden="true"
        >
          <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
        {{ end }}
      </a>
      {{ end }}
    </nav>
  </div>
  {{ end }}
</div>
