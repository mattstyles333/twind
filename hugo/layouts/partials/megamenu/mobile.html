<!-- Debug: {{ printf "%#v" . }} -->
<div class="bg-gray-50 min-h-screen">
  <!-- Mobile Image Cards at Top -->
  <div class="bg-white rounded-lg mx-4 mt-4 p-4 shadow-sm">
    <div class="grid grid-cols-2 gap-3">
      {{ range .megamenu.featured_images }}
      <div class="group">
        <a href="{{ .url | safeHTML }}" class="block">
          <div class="relative overflow-hidden rounded-lg bg-gray-100">
            <img
              class="h-32 w-full object-cover duration-300 ease-in-out group-hover:scale-105"
              src="{{ .image }}"
              alt="{{ .alt }}"
            />
            <!-- Title overlay on image -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent">
              <div class="absolute bottom-0 left-0 right-0 p-3">
                <h3 class="text-sm font-semibold text-white drop-shadow-lg">
                  {{ .title }}
                </h3>
              </div>
            </div>
          </div>
        </a>
      </div>
      {{ end }}
    </div>
  </div>

  <!-- Mobile Navigation Links - Each section in separate white box -->
  {{ range .megamenu.sections }}
  <div class="bg-white rounded-lg mx-4 mt-3 p-4 shadow-sm">
    <h3 class="text-lg font-semibold text-gray-800 mb-4 border-b border-gray-100 pb-2">{{ .title }}</h3>
    <ul class="space-y-1">
      {{ range .links }}
      <li>
        <a
          href="{{ .url | safeHTML }}"
          class="flex items-center justify-between py-3 px-2 text-base font-medium text-gray-800 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-all duration-200 group"
        >
          <span>{{ .text }}</span>
          <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </li>
      {{ end }}
    </ul>
  </div>
  {{ end }}

  <!-- Mobile CTA Links -->
  <div class="bg-white rounded-lg mx-4 mt-3 p-4 shadow-sm">
    {{ range .megamenu.featured_links }}
    <div class="mb-3 last:mb-0">
      <a
        href="{{ .url | safeHTML }}"
        class="flex items-center justify-between rounded-lg p-3 hover:bg-gray-50 transition-colors duration-200 group"
      >
        <div class="flex items-center gap-3">
          {{ if eq .icon "quiz" }}
          <svg class="h-5 w-5 text-blue-600" fill="currentColor" viewBox="0 0 304 303">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M101.689 1.55188C57.051 9.95588 20.63 41.1339 6.79405 82.7869C-28.279 188.367 79.0041 281.842 178.08 232.027C182.485 229.812 186.83 228 187.735 228C188.64 228 204.884 243.469 223.832 262.375C251.665 290.145 259.375 297.29 263.959 299.564C288.527 311.75 311.879 288.385 299.692 263.812C297.41 259.211 290.303 251.542 262.502 223.678C243.6 204.732 228.134 188.494 228.134 187.593C228.134 186.692 229.946 182.351 232.161 177.946C268.286 106.097 230.524 23.6839 152.134 3.29688C139.842 0.0998828 114.127 -0.789117 101.689 1.55188ZM142.134 34.6569C211.126 48.8639 236.929 135.541 187.271 186.281C145.144 229.327 70.132 218.457 43.277 165.416C8.19205 96.1199 66.443 19.0709 142.134 34.6569ZM103.634 50.0619C83.201 54.0499 74.7 61.9619 79.647 72.3869C83.299 80.0829 88.59 81.3079 101.731 77.4999C127.203 70.1179 153.304 81.2469 166.14 104.961C171.52 114.9 177.012 117.749 184.644 114.56C207.084 105.184 174.515 61.5249 137.634 51.5429C130.377 49.5789 110.537 48.7149 103.634 50.0619Z"/>
          </svg>
          {{ else if eq .icon "home" }}
          <svg class="h-5 w-5 text-blue-600" fill="currentColor" viewBox="0 0 512 478">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M246.25 1.10204C236.771 2.20504 225.195 6.12604 216.491 11.182C205.521 17.554 7.32069 215.646 2.81669 224.74C-8.95831 248.513 18.5237 275.717 41.9907 263.518C43.9157 262.518 90.8567 216.654 146.305 161.599C201.752 106.545 248.327 60.958 249.805 60.295C253.173 58.784 258.015 58.684 261.676 60.051C263.257 60.641 308.315 104.858 364.491 160.948C435.908 232.255 465.777 261.443 468.991 263.063C487.98 272.635 510.38 259.702 511.773 238.361C512.631 225.228 512.683 225.296 466.443 178.984L425.991 138.468V91.271C425.991 45.56 425.924 43.896 423.86 38.381C414.421 13.151 378.481 13.365 368.999 38.708C367.266 43.339 366.991 46.5 366.991 61.753V79.431L334.741 47.357C299.859 12.665 296.039 9.63004 280.901 4.58704C274.568 2.47704 258.088 -0.298958 254.491 0.138042C253.941 0.205042 250.233 0.639041 246.25 1.10204ZM249.491 116.55C246.162 118.257 78.4967 285.205 73.8907 291.4L70.9907 295.3V363.969C70.9907 424.223 71.1887 433.303 72.6027 438.068C77.9847 456.195 91.7237 470.161 109.608 475.683C114.936 477.329 119.881 477.5 161.991 477.5H208.491L208.748 412.25L209.005 347H255.991H302.977L303.234 412.25L303.491 477.5H349.991C407.176 477.5 410.372 476.817 425.72 461.316C440.945 445.94 440.991 445.648 440.991 363.44V295.3L438.094 291.4C432.938 284.46 264.599 117.14 261.676 116.05C257.693 114.565 252.988 114.758 249.491 116.55Z"/>
          </svg>
          {{ end }}
          <span class="text-sm font-medium text-gray-800">{{ .text }}</span>
        </div>
        <svg class="w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
    {{ end }}
  </div>

  <!-- Home Trial Image Card at Bottom -->
  <div class="bg-white rounded-lg mx-4 mt-3 mb-4 p-4 shadow-sm">
    <div class="group">
      <a href="{{ .home_trial_card.url | safeHTML }}" class="block">
        <div class="relative overflow-hidden rounded-lg bg-gray-100">
          <img
            class="h-32 w-full object-cover duration-300 ease-in-out group-hover:scale-105"
            src="https://www.spex4less.com/media/mf_webp/png/media/wysiwyg/redesign/trial-banner.webp"
            alt="Home Trial"
          />
          <!-- Title overlay on image -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent">
            <div class="absolute bottom-0 left-0 right-0 p-3">
              <h3 class="text-sm font-semibold text-white drop-shadow-lg">
                {{ .home_trial_card.title }}
              </h3>
            </div>
          </div>
        </div>
      </a>
    </div>
  </div>
</div>
