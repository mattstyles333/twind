<section class="px-3 pt-4 pb-4 sm:pt-8 sm:pb-8 md:pt-4 md:pb-4">
  <section class="">
    <section>
      <div class="py-8 sm:py-16 md:py-8">
        <div class="px-3 mx-auto max-w-6xl text-gray-500 sm:px-6 md:px-2">
          <div class="relative">
            <!-- Simplified grid layout for better mobile performance -->
            <div class="grid grid-cols-1 gap-4 lg:grid-cols-6 lg:gap-3">

              <!-- Get feature cards data from current page's data file -->
              {{ $featureCards := "" }}

              <!-- Try to get data based on the current page's layout or section -->
              {{ if eq .Layout "sunglasses" }}
                {{ $featureCards = .Site.Data.sunglasses.feature_cards }}
              {{ else if eq .Layout "glasses" }}
                {{ $featureCards = .Site.Data.glasses.feature_cards }}
              {{ else if eq .Layout "designer-glasses" }}
                {{ $featureCards = .Site.Data.designer_glasses.feature_cards }}
              {{ else if eq .Layout "designer-sunglasses" }}
                {{ $featureCards = .Site.Data.designer_sunglasses.feature_cards }}
              {{ else }}
                {{ $featureCards = .Site.Data.homepage.feature_cards }}
              {{ end }}

              <!-- Fallback to glasses if nothing found -->
              {{ if not $featureCards }}
                {{ $featureCards = .Site.Data.glasses.feature_cards }}
              {{ end }}

              <!-- Card 1: Rated #1 Card -->
              {{ $rated1 := index (where $featureCards "id" "rated-1") 0 }}
              {{ if $rated1 }}
              <div class="relative order-1 p-6 bg-white rounded-xl border-4 border-blue-800 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900 lg:order-2">
                {{ if $rated1.reviews_badge }}
                <div class="absolute top-4 right-4 lg:hidden">
                  <span class="inline-flex items-center px-3 py-1 text-xs font-medium text-gray-700 bg-blue-50 rounded-full border border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">
                    <strong class="pr-1">{{ $rated1.reviews_badge }}</strong>
                  </span>
                </div>
                {{ end }}
                <div class="flex flex-col items-center justify-center min-h-[300px] lg:min-h-[320px] text-center">
                  {{ if $rated1.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $rated1.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $rated1.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-blue-800 dark:text-white">
                    {{ $rated1.title }}
                  </h2>
                  <p class="text-gray-800 dark:text-gray-300">
                    {{ $rated1.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}

              <!-- Card 2: Customer Focused Card -->
              {{ $customerFocused := index (where $featureCards "id" "customer-focused") 0 }}
              {{ if $customerFocused }}
              <div class="order-2 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900 lg:order-1">
                <div class="flex flex-col items-center justify-center min-h-[280px] lg:min-h-[320px] text-center">
                  {{ if $customerFocused.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $customerFocused.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $customerFocused.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-gray-800 dark:text-white">
                    {{ $customerFocused.title }}
                  </h2>
                  <p class="text-gray-600 dark:text-gray-400">
                    {{ $customerFocused.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}

              <!-- Card 3: More for Less Card -->
              {{ $moreForLess := index (where $featureCards "id" "more-for-less") 0 }}
              {{ if $moreForLess }}
              <div class="order-3 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900">
                <div class="flex flex-col items-center justify-center min-h-[280px] lg:min-h-[320px] text-center">
                  {{ if $moreForLess.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $moreForLess.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $moreForLess.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-gray-800 dark:text-white">
                    {{ $moreForLess.title }}
                  </h2>
                  <p class="text-gray-600 dark:text-gray-400">
                    {{ $moreForLess.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}

              <!-- Frame Selection Card -->
              {{ $frameCard := index (where .Site.Data.glasses.additional_cards
              "id" "frame-selection") 0 }}
              <div
                class="order-4 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-3 lg:p-8 dark:border-gray-800 dark:bg-gray-900"
              >
                <h2
                  class="mb-4 text-2xl font-semibold text-center text-gray-800 dark:text-white"
                >
                  {{ $frameCard.title }}
                </h2>
                <p class="mb-4 text-center text-gray-600 dark:text-gray-400">
                  <strong class="text-blue-900"
                    >{{ $frameCard.subtitle }}</strong
                  >
                </p>
                <p class="mb-6 text-center">{{ $frameCard.text | safeHTML }}</p>
                <div class="flex flex-col gap-3 sm:flex-row sm:justify-center">
                  {{ range $index, $button := $frameCard.buttons }}
                  <a
                    href="{{ $button.url }}"
                    class="inline-flex justify-center items-center px-6 py-3 font-semibold {{ if eq $index 0 }}text-gray-700 bg-white rounded-lg border border-gray-300 shadow-sm transition-colors hover:bg-gray-50{{ else }}text-white rounded-lg transition-colors bg-s hover:bg-blue-900{{ end }}"
                  >
                    {{ $button.text }}
                    <svg
                      class="ml-2 w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                      />
                    </svg>
                  </a>
                  {{ end }}
                </div>
              </div>

              <!-- Money Back Guarantee Card -->
              {{ $guaranteeCard := index (where
              .Site.Data.glasses.additional_cards "id" "money-back-guarantee") 0
              }}
              <div
                class="order-5 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-3 lg:p-8 dark:border-gray-800 dark:bg-gray-900"
              >
                <h2
                  class="mb-4 text-2xl font-semibold text-center text-gray-800 dark:text-white"
                >
                  {{ $guaranteeCard.title }}
                </h2>
                <p class="mb-6 text-center text-gray-600 dark:text-gray-400">
                  {{ $guaranteeCard.text | safeHTML }}
                </p>
                <div class="flex justify-center mt-16">
                  {{ range $guaranteeCard.buttons }}
                  <a
                    href="{{ .url }}"
                    class="inline-flex justify-center items-center px-6 py-3 font-semibold text-white rounded-lg transition-colors bg-s hover:bg-blue-900"
                  >
                    {{ .text }}
                  </a>
                  {{ end }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
</section>
