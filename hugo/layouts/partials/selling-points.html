<section class="px-3 pt-4 pb-4 sm:pt-8 sm:pb-8 md:pt-4 md:pb-4">
  <section class="">
    <section>
      <div class="py-8 sm:py-16 md:py-8">
        <div class="px-3 mx-auto max-w-6xl text-gray-500 sm:px-6 md:px-2">
          <div class="relative">
            <!-- Simplified grid layout for better mobile performance -->
            <div class="grid grid-cols-1 gap-4 lg:grid-cols-6 lg:gap-3">

              <!-- Get feature cards data from current page's data file -->
              {{ $featureCards := "" }}

              <!-- Try to get data based on the current page's layout or section -->
              {{ if eq .Layout "sunglasses" }}
                {{ $featureCards = .Site.Data.sunglasses.feature_cards }}
              {{ else if eq .Layout "glasses" }}
                {{ $featureCards = .Site.Data.glasses.feature_cards }}
              {{ else if eq .Layout "designer-glasses" }}
                {{ $featureCards = .Site.Data.designer_glasses.feature_cards }}
              {{ else if eq .Layout "designer-sunglasses" }}
                {{ $featureCards = .Site.Data.designer_sunglasses.feature_cards }}
              {{ else }}
                {{ $featureCards = .Site.Data.homepage.feature_cards }}
              {{ end }}

              <!-- Fallback to glasses if nothing found -->
              {{ if not $featureCards }}
                {{ $featureCards = .Site.Data.glasses.feature_cards }}
              {{ end }}

              <!-- Card 1: Rated #1 Card -->
              {{ $rated1 := index (where $featureCards "id" "rated-1") 0 }}
              {{ if $rated1 }}
              <div class="relative order-1 p-6 bg-white rounded-xl border-4 border-blue-800 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900 lg:order-2">
                {{ if $rated1.reviews_badge }}
                <div class="absolute top-4 right-4 lg:hidden">
                  <span class="inline-flex items-center px-3 py-1 text-xs font-medium text-gray-700 bg-blue-50 rounded-full border border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">
                    <strong class="pr-1">{{ $rated1.reviews_badge }}</strong>
                  </span>
                </div>
                {{ end }}
                <div class="flex flex-col items-center justify-center min-h-[300px] lg:min-h-[320px] text-center">
                  {{ if $rated1.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $rated1.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $rated1.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-blue-800 dark:text-white">
                    {{ $rated1.title }}
                  </h2>
                  <p class="text-gray-800 dark:text-gray-300">
                    {{ $rated1.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}

              <!-- Card 2: Customer Focused Card -->
              {{ $customerFocused := index (where $featureCards "id" "customer-focused") 0 }}
              {{ if $customerFocused }}
              <div class="order-2 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900 lg:order-1">
                <div class="flex flex-col items-center justify-center min-h-[280px] lg:min-h-[320px] text-center">
                  {{ if $customerFocused.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $customerFocused.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $customerFocused.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-gray-800 dark:text-white">
                    {{ $customerFocused.title }}
                  </h2>
                  <p class="text-gray-600 dark:text-gray-400">
                    {{ $customerFocused.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}

              <!-- Card 3: More for Less Card -->
              {{ $moreForLess := index (where $featureCards "id" "more-for-less") 0 }}
              {{ if $moreForLess }}
              <div class="order-3 p-6 bg-white rounded-xl border border-gray-200 shadow-sm lg:col-span-2 lg:p-8 dark:border-gray-800 dark:bg-gray-900">
                <div class="flex flex-col items-center justify-center min-h-[280px] lg:min-h-[320px] text-center">
                  {{ if $moreForLess.svg_path }}
                  <svg class="mb-4 w-12 h-12 text-gray-800" viewBox="{{ $moreForLess.svg_viewbox }}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="{{ $moreForLess.svg_path }}"></path>
                  </svg>
                  {{ end }}
                  <h2 class="mb-4 text-2xl font-semibold text-gray-800 dark:text-white">
                    {{ $moreForLess.title }}
                  </h2>
                  <p class="text-gray-600 dark:text-gray-400">
                    {{ $moreForLess.text | safeHTML }}
                  </p>
                </div>
              </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
</section>

<!-- Style Finder Section -->
<section class="px-3 pt-4 pb-8 sm:pt-6 sm:pb-12 md:pt-4 md:pb-8">
  <div class="mx-auto max-w-6xl">
    {{ partial "style-finder.html" . }}
  </div>
</section>
