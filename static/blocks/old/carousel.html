<link href="../output.css" rel="stylesheet" />

<div class="mt-24">
  <script>
    window.carousel = function () {
      return {
        container: null,
        prev: null,
        next: null,
        init() {
          this.container = this.$refs.container;

          this.update();

          this.container.addEventListener("scroll", this.update.bind(this), {
            passive: true,
          });
        },
        update() {
          const rect = this.container.getBoundingClientRect();

          const visibleElements = Array.from(this.container.children).filter(
            (child) => {
              const childRect = child.getBoundingClientRect();

              return (
                childRect.left >= rect.left && childRect.right <= rect.right
              );
            },
          );

          if (visibleElements.length > 0) {
            this.prev = this.getPrevElement(visibleElements);
            this.next = this.getNextElement(visibleElements);
          }
        },
        getPrevElement(list) {
          const sibling = list[0].previousElementSibling;

          if (sibling instanceof HTMLElement) {
            return sibling;
          }

          return null;
        },
        getNextElement(list) {
          const sibling = list[list.length - 1].nextElementSibling;

          if (sibling instanceof HTMLElement) {
            return sibling;
          }

          return null;
        },
        scrollTo(element) {
          const current = this.container;

          if (!current || !element) return;

          const nextScrollPosition =
            element.offsetLeft +
            element.getBoundingClientRect().width / 2 -
            current.getBoundingClientRect().width / 2;

          current.scroll({
            left: nextScrollPosition,
            behavior: "smooth",
          });
        },
      };
    };
  </script>
  <style>
    .scroll-snap-x {
      scroll-snap-type: x mandatory;
    }

    .snap-center {
      scroll-snap-align: center;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>

  <h1 class="text-4xl">Carousel with AlpineJS</h1>

  <div class="mx-auto mt-12 flex items-center">
    <div
      x-data="carousel()"
      x-init="init()"
      class="group relative overflow-hidden"
    >
      <div
        x-ref="container"
        class="scroll-snap-x no-scrollbar space-y-4 md:-ml-4 md:flex md:space-x-4 md:space-y-0 md:overflow-x-scroll"
      >
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
        <div
          class="ml-4 w-96 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 shadow-md"
        >
          <div>
            <img src="/assets/images/andy-holmes-4iapyjvm714-unsplash-sm.jpg" />
          </div>
          <div class="flex justify-between px-2 py-3">
            <div class="text-lg font-semibold">Content Title</div>
            <time>3/6/2021</time>
          </div>
        </div>
      </div>
      <div
        @click="scrollTo(prev)"
        x-show="prev !== null"
        class="absolute left-0 top-1/2 hidden -translate-x-full -translate-y-1/2 transform cursor-pointer rounded-full bg-white p-2 transition-transform ease-in-out group-hover:translate-x-0 md:block"
      >
        <div>&lt;</div>
      </div>
      <div
        @click="scrollTo(next)"
        x-show="next !== null"
        class="absolute right-0 top-1/2 hidden -translate-y-1/2 translate-x-full transform cursor-pointer rounded-full bg-white p-2 transition-transform ease-in-out group-hover:translate-x-0 md:block"
      >
        <div>&gt;</div>
      </div>
    </div>
  </div>
  <div class="mt-4 px-4 text-sm md:px-0">
    <span
      >Photo by
      <a
        class="underline"
        href="https://unsplash.com/@andyjh07?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"
        >Andy Holmes</a
      >
      on
      <a
        class="underline"
        href="https://unsplash.com/t/color-theory?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"
        >Unsplash</a
      ></span
    >
  </div>
</div>

<div class="mx-auto mt-12 flex max-w-md items-center">
  <div
    x-data="carousel()"
    x-init="init()"
    class="group relative overflow-hidden"
  >
    <div
      x-ref="container"
      class="scroll-snap-x no-scrollbar space-y-4 md:-ml-4 md:flex md:space-x-4 md:space-y-0 md:overflow-x-scroll"
    >
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">1</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">2</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">3</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">4</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">5</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">6</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">7</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">8</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">9</div>
      </div>
      <div
        class="ml-4 w-12 flex-auto flex-shrink-0 flex-grow-0 snap-center items-center justify-center overflow-hidden rounded-lg bg-gray-100 px-2 py-4 shadow-md"
      >
        <div class="text-center text-3xl">10</div>
      </div>
    </div>
    <div
      @click="scrollTo(prev)"
      x-show="prev !== null"
      class="absolute left-0 top-1/2 hidden -translate-x-full -translate-y-1/2 transform cursor-pointer rounded-full bg-white p-2 transition-transform ease-in-out group-hover:translate-x-0 md:block"
    >
      <div>&lt;</div>
    </div>
    <div
      @click="scrollTo(next)"
      x-show="next !== null"
      class="absolute right-0 top-1/2 hidden -translate-y-1/2 translate-x-full transform cursor-pointer rounded-full bg-white p-2 transition-transform ease-in-out group-hover:translate-x-0 md:block"
    >
      <div>&gt;</div>
    </div>
  </div>
</div>