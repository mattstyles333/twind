<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
    name="description"
    content="Interactive product quiz to help you find the perfect product based on your preferences."
  />
  <title>Product Quiz</title>
  <link
    href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/alpinejs@latest/dist/alpine.js"
    defer
  ></script>
</head>

<div x-data="quizApp()" class="mx-auto h-screen">
  <!-- Stepper: Each step updates the currentStep variable on click -->

  <div class="flex items-center justify-between px-3 py-4">
    <!-- Back Button (left-aligned) -->
    <button
      @click="goToPreviousStep"
      class="flex items-center text-lg text-gray-700 dark:text-gray-300"
    >
      <svg
        class="mr-1 h-6 w-6"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 19l-7-7 7-7"
        />
      </svg>
      Back
    </button>
    <!-- Step Display (right-aligned) -->
    <div
      class="flex items-center justify-center rounded-full border-2 border-gray-600 bg-gray-100 px-6 py-1 font-medium"
    >
      <span
        x-text="`${currentStep + 1}/${steps.length}`"
        class="text-lg tracking-widest text-gray-600"
      ></span>
    </div>
  </div>

  <div class="w-full bg-gray-200 dark:bg-gray-700">
    <div
      class="h-2.5 bg-green-500 transition-all duration-700 ease-out"
      :style="`width: ${progressWidth}%`"
    ></div>
  </div>

  <!-- Each step automatically transitions to the next upon selection -->
  <div class="px-3 pt-6 md:pt-12">
    <!-- Step 1: Collect Email Address, Upload Photo, or Start Quiz -->
    <div x-show="currentStep === 0">
      <div class="mx-auto max-w-screen-lg px-4 py-8">
        <!-- Introductory Text -->
        <div class="mb-8 text-center">
          <h1 class="mb-4 text-4xl font-bold tracking-tight dark:text-white">
            Welcome to Our Style Finder!
          </h1>
          <p
            class="leading-loose text-gray-500 dark:text-gray-400 md:text-lg lg:text-2xl"
          >
            Enter your email address to get started. Take a
            <strong>quick quiz</strong>, and we'll recommend frames based on
            your preferences and style.
          </p>
        </div>

        <!-- Email Input and Start Quiz Button Block -->
        <div class="mx-auto w-1/2 rounded-md border-2 border-gray-300 p-6">
          <h2
            class="mb-4 text-xl font-semibold text-gray-700 dark:text-gray-300"
          >
            Enter your Email Address & Start the Quiz
          </h2>

          <!-- Email Input -->
          <div class="mb-6 flex items-center space-x-4">
            <label
              class="whitespace-nowrap text-lg font-semibold text-gray-700 dark:text-gray-300"
              for="email"
            >
              Email:
            </label>
            <input
              type="email"
              id="email"
              x-model="email"
              placeholder="you@example.com"
              required
              class="flex-1 rounded border border-gray-300 px-3 py-2"
            />
          </div>

          <!-- Start Quiz Button -->
          <button
            @click="nextStep"
            :disabled="!emailValid"
            class="flex w-full items-center justify-center rounded bg-blue-900 px-6 py-3 text-lg font-bold text-white duration-500 ease-in-out hover:bg-gray-800 dark:hover:bg-slate-900"
            :class="{ 'opacity-50 cursor-not-allowed': !emailValid }"
          >
            <span>Start Quiz</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              class="ml-2 h-6 w-6"
            >
              <line
                x1="3"
                y1="12"
                x2="18"
                y2="12"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 5l7 7-7 7"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div x-show="currentStep === 1">
      <div class="text-center">
        <p
          class="text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
        >
          What style are you looking for?
        </p>
        <div
          class="mx-auto mt-4 grid max-w-3xl grid-cols-1 gap-4 md:grid-cols-2"
        >
          <!-- Button for "Mens" -->
          <button
            @click="selectGender('Mens')"
            :class="selectedGender === 'Mens' ? 'bg-gray-50 border-2 border-blue-600 dark:border-blue-500' : 'bg-white border-2 border-gray-400 dark:border-slate-500'"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:border-2 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Mens</p>
          </button>

          <!-- Button for "Womens" -->
          <button
            @click="selectGender('Womens')"
            :class="selectedGender === 'Womens' ? 'bg-gray-50 border-2 border-blue-600 dark:border-blue-500' : 'bg-white border-2 border-gray-400 dark:border-slate-500'"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:border-2 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Womens</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Step 2: Select Type -->
    <div x-show="currentStep === 2">
      <div class="mx-auto max-w-3xl text-center">
        <p
          class="text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
        >
          What type of glasses are you looking for?
        </p>
        <div
          class="mx-auto mt-4 grid max-w-4xl grid-cols-1 gap-4 md:grid-cols-3"
        >
          <!-- Button for "Glasses" -->
          <button
            @click="selectType('Glasses')"
            :class="{
      'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedType === 'Glasses',
      'bg-white border-2 border-gray-400 dark:border-slate-500': selectedType !== 'Glasses'
    }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Glasses</p>
          </button>

          <!-- Button for "Sunglasses" -->
          <button
            @click="selectType('Sunglasses')"
            :class="{
      'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedType === 'Sunglasses',
      'bg-white border-2 border-gray-400 dark:border-slate-500': selectedType !== 'Sunglasses'
    }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Sunglasses</p>
          </button>

          <!-- Button for "Both" -->
          <button
            @click="selectType('Both')"
            :class="{
      'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedType === 'Both',
      'bg-white border-2 border-gray-400 dark:border-slate-500': selectedType !== 'Both'
    }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Both</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Step 3: Select Frame Size -->
    <div x-show="currentStep === 3">
      <div class="mx-auto max-w-3xl text-center">
        <div
          x-data="{ showModal: false }"
          class="flex items-center justify-center"
        >
          <!-- Trigger Button -->
          <div class="">
            <p
              class="flex max-w-2xl items-center text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
            >
              Please choose the width of your frame that best fits your face
              size:
              <button
                @click="showModal = true"
                class="ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-2 border-black p-3 font-semibold dark:border-gray-400"
              >
                ?
              </button>
            </p>
          </div>

          <!-- Modal -->
          <div
            x-show="showModal"
            class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
          >
            <!-- Modal Inner -->
            <div
              class="w-full overflow-hidden rounded-lg bg-white shadow md:w-1/2"
            >
              <!-- Close Button -->
              <div class="flex justify-end p-2">
                <button
                  @click="showModal = false"
                  class="text-black hover:text-gray-700 dark:text-gray-200"
                >
                  <svg
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    ></path>
                  </svg>
                </button>
              </div>
              <!-- Modal Content -->
              <div class="px-4 pb-8">
                <p class="pb-2 text-lg font-semibold lg:text-2xl">
                  Choosing Your Size:
                </p>
                <p class="text-black">
                  Selecting the correct frame width and face size is crucial to
                  ensuring your glasses not only fit comfortably but also
                  complement your facial features. For a detailed understanding
                  of how to measure your face and choose the most flattering
                  frame size, please visit our
                  <a
                    href="/choosing-the-right-size-glasses"
                    target="_blank"
                    class="text-blue-600 hover:text-blue-800"
                    >Size Guide page</a
                  >. This guide will provide you with all the information you
                  need to find the perfect size for your frames.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div
          class="mx-auto mt-4 grid max-w-4xl grid-cols-1 justify-center gap-4 md:grid-cols-4"
        >
          <!-- Button for "Small" frame size -->
          <button
            @click="selectFrameSize('115-135')"
            :class="{
    'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedFrameSize === '115-135',
    'bg-white border-2 border-gray-400 dark:border-slate-500': selectedFrameSize !== '115-135'
  }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Small</p>
          </button>

          <!-- Button for "Medium" frame size -->
          <button
            @click="selectFrameSize('130-140')"
            :class="{
    'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedFrameSize === '130-140',
    'bg-white border-2 border-gray-400 dark:border-slate-500': selectedFrameSize !== '130-140'
  }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Medium</p>
          </button>

          <!-- Button for "Large" frame size -->
          <button
            @click="selectFrameSize('135-145')"
            :class="{
    'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedFrameSize === '135-145',
    'bg-white border-2 border-gray-400 dark:border-slate-500': selectedFrameSize !== '135-145'
  }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Large</p>
          </button>

          <!-- Button for "Extra Large" frame size -->
          <button
            @click="selectFrameSize('140-155')"
            :class="{
    'bg-gray-50 border-2 border-blue-600 dark:border-blue-500': selectedFrameSize === '140-155',
    'bg-white border-2 border-gray-400 dark:border-slate-500': selectedFrameSize !== '140-155'
  }"
            class="btn mx-auto w-full rounded px-4 py-4 text-center font-semibold text-gray-800 shadow-md transition duration-300 ease-in-out hover:bg-gray-100 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Extra Large</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Step 4: Select Face Shape -->
    <div x-show="currentStep === 4">
      <div class="mx-auto max-w-3xl text-center">
        <div
          x-data="{ showModalFaceShape: false }"
          class="flex items-center justify-center"
        >
          <!-- Trigger Button -->
          <div class="">
            <p
              class="flex max-w-2xl items-center text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
            >
              Select your face shape:

              <button
                @click="showModalFaceShape = true"
                class="ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-2 border-black p-3 font-semibold dark:border-gray-400"
              >
                ?
              </button>
            </p>
          </div>

          <!-- Modal -->
          <div
            x-show="showModalFaceShape"
            class="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
          >
            <!-- Modal Inner -->
            <div
              class="w-full overflow-hidden rounded-lg bg-white shadow md:w-1/2"
            >
              <!-- Close Button -->
              <div class="flex justify-end p-2">
                <button
                  @click="showModalFaceShape = false"
                  class="text-black hover:text-gray-700 dark:text-gray-200"
                >
                  <svg
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    ></path>
                  </svg>
                </button>
              </div>
              <!-- Modal Content -->
              <div class="px-4 pb-8 text-left">
                <p class="pb-2 text-lg font-semibold lg:text-2xl">
                  Understanding Face Shapes:
                </p>
                <p class="text-black">
                  Choosing the right glasses involves considering your face
                  shape to ensure they enhance your best features. Different
                  frame shapes can accentuate or soften your facial features,
                  depending on the shape of your face:
                </p>
                <ul class="mt-2 list-disc pl-5 text-black">
                  <li>
                    <strong>Oval Faces:</strong> Almost any frame style works
                    well. Look for frames that are as wide as (or wider than)
                    the broadest part of the face.
                  </li>
                  <li>
                    <strong>Round Faces:</strong> Opt for angular frames that
                    add structure, such as rectangular frames, to make your face
                    appear longer and thinner.
                  </li>
                  <li>
                    <strong>Square Faces:</strong> Round or oval frames can
                    soften the angularity and balance your strong jawline.
                  </li>
                  <li>
                    <strong>Heart-Shaped Faces:</strong> Consider frames that
                    are wider at the bottom or light-colored frames to balance
                    the width of your forehead.
                  </li>
                  <li>
                    <strong>Diamond Faces:</strong> Cat-eye styles or frames
                    that have detailing at the top can draw attention to your
                    eyes, balancing the face.
                  </li>
                </ul>
                <p class="mt-4 text-black">
                  Your choice of glasses can transform how your face is
                  perceived by others. It's not just about clear vision—it's
                  about showcasing your personality and style. For more
                  personalized advice, consider consulting with an eyewear
                  specialist who can recommend frames that suit your specific
                  face shape.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-4 grid grid-cols-2 gap-4 md:grid-cols-3">
          <!-- Face Shape Buttons Start Here -->
          <button
            @click="selectFaceShape('Oval')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Oval',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Oval'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <span class="flex w-full justify-center">
              <svg
                class="mb-1 h-auto w-16"
                viewBox="0 0 517 606"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M226.51 0.539918C219.429 1.42633 202.828 5.26742 194.06 8.04642C161.93 18.2311 137.644 33.1673 112.556 58.1723C75.9432 94.6657 54.6198 139.57 45.2052 200.005C43.363 211.833 42.9566 219.537 42.5582 250.15C41.6027 323.609 46.5282 357.266 65.7538 408.63C86.8186 464.912 111.446 507.576 143.094 542.613C172.129 574.759 209.452 598.238 241.035 604.228C292.265 613.943 354.72 576.127 401.684 506.954C432.74 461.212 460.921 393.544 469.031 345.244C472.871 322.373 473.841 308.68 474.353 270.11C475.008 220.865 473.452 202.442 465.985 171.057C444.369 80.1997 378.469 14.8472 294.906 1.39937C287.82 0.259423 278.345 -0.0899491 257.463 0.0188553C242.086 0.0987117 228.158 0.33329 226.51 0.539918ZM150.127 199.938C166.664 200.795 187.707 207.396 199.943 215.564C207.025 220.292 208.493 223.06 206.952 228.781C205.49 234.207 202.302 240.398 200.641 241.035C199.917 241.313 196.904 240.105 193.947 238.352C181.115 230.748 162.738 224.287 148.557 222.396C133.624 220.404 100.794 221.739 73.8824 225.433C61.3275 227.156 50.8655 228.375 50.6339 228.143C50.0048 227.515 66.921 216.158 73.2094 212.987C90.9073 204.062 118.359 198.032 136.148 199.162C138.619 199.319 144.91 199.669 150.127 199.938ZM398.769 199.945C415.535 202.177 431.46 206.792 443.575 212.93C449.494 215.929 466.915 227.517 466.352 228.081C466.123 228.308 455.2 227.083 442.077 225.358C411.158 221.291 381.242 220.342 365.613 222.931C352.092 225.17 342.222 228.495 328.117 235.56C321.758 238.747 316.17 241.115 315.701 240.825C314.363 239.998 311.203 233.355 309.971 228.781C308.53 223.432 309.763 220.606 315.249 216.687C324.89 209.799 337.606 204.856 354.042 201.605C371.23 198.208 382.555 197.787 398.769 199.945ZM6.95962 247.467C2.5933 252.655 1.24436 259.269 0.66025 278.364C0.364702 288.007 0.623307 301.55 1.23737 308.593C3.92526 339.446 9.90412 354.003 31.8077 383.029C42.8188 397.622 47.939 402.478 51.7372 401.934C54.9733 401.471 54.7097 397.729 50.3583 382.337C40.738 348.305 37.476 323.4 35.7406 270.737L35.0787 250.633L32.4447 249.409C26.1233 246.471 18.6637 244.425 14.2665 244.425C10.2017 244.425 9.15128 244.863 6.95962 247.467ZM494.101 245.563C492.454 246.103 489.038 247.461 486.511 248.581L481.916 250.617L481.221 269.732C479.201 325.279 476.419 346.38 466.421 382.006C461.019 401.252 460.999 402.084 465.937 402.127C472.596 402.184 500.993 363.873 508.021 345.351C513.505 330.9 515.318 319.816 516.202 295.334C516.825 278.107 515.796 262.172 513.543 254.189C512.967 252.148 511.35 249.115 509.95 247.451C507.696 244.775 506.809 244.434 502.25 244.504C499.415 244.547 495.749 245.024 494.101 245.563Z"
                  fill="#60a5fa"
                />
              </svg>
            </span>
            <p
              class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
            >
              Oval
            </p>
          </button>

          <button
            @click="selectFaceShape('Round')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Round',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Round'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <span class="flex w-full justify-center">
              <svg
                class="mb-1 h-auto w-16"
                viewBox="0 0 559 606"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M235.776 1.53722C202 5.20166 167.97 15.7207 146.641 29.0914C118.596 46.6712 87.8266 81.2002 71.8525 113.017C59.9497 136.724 54.0274 155.219 44.1001 199.686C36.8894 231.985 35.826 240.169 36.565 257.671C37.3258 275.675 40.0351 291.025 48.1403 323.238C55.7324 353.415 55.5893 352.6 57.0331 373.641C60.2565 420.604 71.3747 458.25 92.1994 492.717C131.481 557.733 195.966 599.278 267.302 605.529C288.535 607.39 316.261 603.662 340.453 595.694C364.391 587.81 394.722 570.879 414.505 554.357C434.951 537.282 455.833 512.598 468.424 490.621C489.168 454.415 499.715 416.892 502.615 368.981C503.437 355.411 504.288 349.887 507.323 338.436C519.46 292.648 522.697 273.904 522.7 249.388L522.703 232.303L515.743 201.757C502.839 145.117 495.068 123.228 478.284 96.2421C462.738 71.2454 434.667 42.6558 412.263 29.0034C386.017 13.0089 352.933 3.5553 313.88 0.891097C292.945 -0.536781 251.748 -0.19612 235.776 1.53722ZM170.472 197.722C195.946 200.824 224.308 213.089 226.539 221.966C227.691 226.555 222.107 240.069 219.057 240.069C218.263 240.069 213.769 237.994 209.07 235.458C178.775 219.103 149.558 216.328 89.2735 224.078C63.2924 227.418 62.5181 227.333 69.9558 221.948C97.1527 202.258 134.27 193.312 170.472 197.722ZM441.715 199.644C454.653 202.391 467.993 207.068 477.752 212.278C485.96 216.661 497.397 224.531 497.447 225.831C497.49 226.933 494.278 226.777 482.449 225.103C456.381 221.414 442.154 220.259 423.37 220.312C392.106 220.399 375.01 224.064 354.717 235.025C348.594 238.331 344.415 239.986 343.175 239.592C341.343 239.011 339.027 234.276 336.83 226.625C335.446 221.802 337.612 218.318 345.102 213.321C354.907 206.78 370.433 201.336 388.649 198.05C399.975 196.007 428.637 196.869 441.715 199.644ZM10.3932 244.553C2.86325 247.104 -0.0450772 259.275 0.000527288 288.032C0.0730799 333.308 6.3862 353.21 31.0624 385.942C36.0509 392.56 42.5039 400.187 45.4029 402.892C53.4604 410.414 54.4503 409.662 52.8562 397.227C52.2509 392.513 51.0849 379.802 50.265 368.981C48.9829 352.072 48.189 347.17 44.6132 334.087C36.5546 304.597 32.0512 281.975 30.029 260.823C29.4051 254.299 28.3966 248.361 27.7872 247.628C26.7776 246.413 23.5242 245.327 16.557 243.88C15.1319 243.584 12.3583 243.886 10.3932 244.553ZM542.046 243.89C540.62 244.129 537.297 245.015 534.662 245.86L529.869 247.396L529.139 259.005C528.077 275.889 524.368 296.258 517.219 324.457C513.754 338.125 510.463 353.735 509.905 359.145C508.725 370.573 505.746 404.615 505.76 406.516C505.793 411.245 516.34 401.952 526.617 388.137C553.09 352.551 559.003 334.494 559 289.252C558.998 257.906 556.594 246.906 549.184 244.324C547.368 243.693 545.602 243.238 545.26 243.316C544.917 243.393 543.471 243.652 542.046 243.89Z"
                  fill="#60a5fa"
                />
              </svg>
            </span>
            <p
              class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
            >
              Round
            </p>
          </button>

          <button
            @click="selectFaceShape('Square')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Square',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Square'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <span class="flex w-full justify-center">
              <svg
                class="mb-1 h-auto w-16"
                viewBox="0 0 547 606"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M214.84 0.465045C180.94 1.27822 169.896 2.15403 151.212 5.51222C76.5153 18.9384 49.5731 71.6069 43.6052 215.871C41.9969 254.756 42.8954 313.857 45.2727 325.541C47.1694 334.867 52.7325 351.08 58.3933 363.781C63.2389 374.653 65.0512 385.996 66.7165 415.868C70.2314 478.946 70.8787 484.783 75.3283 493.52C84.6005 511.725 120.416 544.552 153.586 565.248C183.397 583.848 218.303 598.784 244.688 604.23C254.428 606.24 287.994 606.647 298.764 604.886C321.081 601.235 355.329 587.742 383.236 571.603C421.191 549.653 460.916 514.919 471.11 494.768C476.274 484.559 477.068 477.883 480.351 416.967C481.917 387.918 483.791 376.025 488.641 364.372C490.815 359.151 494.258 350.182 496.295 344.44C503.44 324.298 503.605 322.846 504.155 274.661C505.542 152.972 492.673 79.6089 463.456 42.6534C443.058 16.8549 414.337 5.1419 362.94 1.66283C340.711 0.157357 256.176 -0.526149 214.84 0.465045ZM157.842 173.001C179.98 174.839 205.527 184.319 214.173 193.906C218.682 198.905 218.72 199.752 214.952 210.831C212.405 218.318 210.475 219.285 204.666 215.981C202.116 214.531 196.52 211.532 192.231 209.319C163.619 194.549 134.018 193.109 66.824 203.221C61.0942 204.083 56.2332 204.615 56.0215 204.402C55.4587 203.838 68.9084 194.013 76.7884 189.232C84.855 184.336 97.076 179.477 109.311 176.3C125.712 172.042 137.023 171.272 157.842 173.001ZM431.122 174.759C442.088 176.843 456.617 181.909 466.607 187.133C473.943 190.968 491.927 203.549 491.127 204.286C490.918 204.48 484.36 203.714 476.556 202.584C448.451 198.516 432.303 197.056 415.05 197.02C386.661 196.963 368.638 201.101 349.302 212.112C337.051 219.089 335.641 219.035 332.65 211.475C328.014 199.751 328.074 198.735 333.735 193.302C342.52 184.871 365.336 175.627 383.735 173.046C393.271 171.709 420.187 172.681 431.122 174.759ZM10.604 222.375C3.95924 227.611 1.27478 240.002 0.229301 270.265C-1.28681 314.131 4.40902 335.49 26.521 368.867C42.2756 392.646 46.8546 397.059 53.8537 395.205L57.4147 394.262L57.2732 386.658C57.1635 380.716 56.242 376.775 53.0562 368.616C50.8149 362.874 47.2616 353.774 45.1597 348.394C37.2961 328.26 36.8968 324.921 36.1475 273.123L35.4739 226.53L28.8917 224.078C18.393 220.168 13.9313 219.753 10.604 222.375ZM528.045 221.013C526.838 221.284 522.836 222.479 519.152 223.669L512.454 225.834L511.747 234.206C511.359 238.809 511.041 257.472 511.041 275.68C511.041 293.887 510.527 312.889 509.899 317.905C508.491 329.153 502.583 348.982 496.817 361.809C491.688 373.217 489.1 382.533 489.1 389.585V394.708L493.503 395.413C499.482 396.371 501.828 394.632 510.943 382.477C527.505 360.393 538.642 340.015 542.745 324.284C546.029 311.7 547.617 289.774 546.779 268.617C545.64 239.895 543.154 228.058 537.208 223.046C533.989 220.332 532.527 220.008 528.045 221.013Z"
                  fill="#60a5fa"
                />
              </svg>
            </span>
            <p
              class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
            >
              Square
            </p>
          </button>

          <button
            @click="selectFaceShape('Heart')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Heart',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Heart'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <div class="flex w-full flex-col items-center justify-center">
              <span class="flex w-full justify-center">
                <svg
                  class="mb-1 h-auto w-16"
                  viewBox="0 0 594 606"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M158.798 2.14076C112.373 10.1812 81.8433 34.9229 63.8626 79.0731C58.8707 91.3314 51.6022 118.065 48.797 134.484C44.5897 159.108 43.7194 203.755 46.9235 230.543C47.5377 235.676 49.3167 254.449 50.877 272.261C57.8181 351.487 62.8374 369.742 92.1259 422.297C140.576 509.234 198.87 570.376 258.913 597.231C275.382 604.598 281.562 606 297.552 606C309.562 606 312.017 605.651 321.017 602.66C364.23 588.304 414.25 547.344 456.275 491.901C481.087 459.166 512.169 405.863 523.869 375.981C533.389 351.668 536.472 335.065 541.57 280.671C547.124 221.391 548.052 207.772 548.047 185.533C548.039 147.874 543.42 119.235 532.11 86.7283C515.235 38.2241 483.147 10.5655 433.972 2.13747C423.733 0.382044 416.231 0 392.059 0C375.866 0 357.587 0.515978 351.438 1.14613C338.319 2.49097 318.272 7.31372 305.621 12.1672L296.656 15.6067L288.041 12.3198C277.432 8.27432 270.074 6.15222 256.144 3.12222C246.548 1.03525 241.253 0.738837 208.003 0.433641C175.438 0.133935 169.124 0.352402 158.798 2.14076ZM190.422 156.405C215.442 160.805 240.418 173.753 240.418 182.326C240.418 186.316 236.444 196.99 234.296 198.771C232.944 199.893 230.178 198.948 218.68 193.437C204.915 186.841 192.445 182.615 178.728 179.896C162.573 176.696 119.918 178.872 78.9392 184.986C73.2222 185.839 68.3523 186.345 68.1171 186.109C67.2897 185.282 82.829 174.524 90.9809 170.279C104.85 163.059 126.697 156.468 143.723 154.366C151.37 153.422 180.756 154.706 190.422 156.405ZM445.893 154.828C474.522 157.002 500.51 166.328 519.512 181.248C525.723 186.124 526.225 186.772 523.358 186.215C513.842 184.37 475.362 179.919 460.243 178.917C448.058 178.108 438.599 178.116 428.376 178.94C403.981 180.909 391.946 184.183 373.586 193.845C367.358 197.122 361.521 199.804 360.614 199.804C358.632 199.804 353.591 189.26 352.816 183.493C352.32 179.803 352.702 179.014 356.744 175.366C364.755 168.134 383.983 160.052 401.392 156.599C416.231 153.655 425.568 153.284 445.893 154.828ZM7.39312 206.142C1.70024 211.224 0.653089 217.403 0.0927016 249.207C-0.751176 297.079 3.89125 314.853 25.4233 346.19C36.4871 362.29 46.4994 374.141 50.7451 376.165C54.0459 377.738 54.67 377.735 57.7664 376.135C60.7761 374.579 61.0617 374.032 60.2563 371.35C50.8517 340.038 48.8673 326.791 42.6228 253.598C40.7428 231.559 39.0089 212.926 38.7693 212.19C38.0144 209.87 19.4887 203.098 13.9013 203.098C12.0674 203.098 9.41161 204.341 7.39312 206.142ZM570.607 204.74C567.585 205.564 562.783 207.274 559.937 208.542C555.622 210.463 554.666 211.435 554.191 214.382C553.876 216.328 551.851 237.926 549.689 262.38C544.155 324.968 541.579 343.054 535.242 363.799L532.264 373.547L534.8 375.6C536.195 376.729 538.269 377.652 539.409 377.652C542.736 377.652 549.868 370.396 560.422 356.275C585.551 322.653 592.314 303.977 593.83 264.027C594.509 246.126 593.085 222.692 590.83 214.677C590.159 212.29 587.979 208.708 585.986 206.717C581.933 202.667 579.404 202.343 570.607 204.74Z"
                    fill="#60a5fa"
                  />
                </svg>
              </span>
              <p
                class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
              >
                Heart
              </p>
            </div>
          </button>

          <button
            @click="selectFaceShape('Diamond')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Diamond',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Diamond'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <span class="flex w-full justify-center">
              <svg
                class="mb-1 h-auto w-16"
                viewBox="0 0 544 606"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M232.679 1.7243C183.209 9.16469 151.126 28.0933 121.638 67.239C105.549 88.597 83.2469 123.655 71.4528 146.131C59.3057 169.279 51.0811 192.909 46.3955 218.124C44.3662 229.044 44.0334 234.099 44.0192 254.193C43.9999 279.469 44.5955 285.794 51.6564 335.377C56.831 371.708 62.1294 399.673 65.3833 407.816C66.7937 411.346 70.0263 418.003 72.5679 422.609C116.85 502.858 216.477 598.008 263.961 605.4C279.399 607.804 294.966 603.097 317.401 589.243C361.545 561.984 418.636 503.964 455.139 449.259C466.649 432.01 476.951 413.639 479.537 405.75C483.94 392.321 493.606 333.76 498.685 289.754C501.084 268.975 501.059 238.634 498.631 223.712C491.933 182.554 477.217 148.557 444.532 98.74C430.727 77.697 413.27 55.0527 403.068 44.9513C383.419 25.4974 361.464 13.0876 334.663 6.28424C315.431 1.40323 307.328 0.556878 275.801 0.138273C249.919 -0.205145 244.085 0.00923736 232.679 1.7243ZM168.015 189.231C186.443 191.971 205.168 199.261 214.48 207.321C219.034 211.263 219.262 214.014 215.755 222.741C212.652 230.465 211.039 231.421 206.085 228.474C184.901 215.866 169.142 211.454 141.362 210.354C124.482 209.685 110.04 210.707 81.4206 214.592C70.8928 216.02 61.4171 217.057 60.3619 216.895C57.7239 216.489 78.881 202.558 87.895 198.765C96.5254 195.134 110.445 191.147 121.069 189.264C132.133 187.302 154.94 187.286 168.015 189.231ZM420.893 189.199C435.415 191.533 448.734 195.422 459.344 200.428C469.575 205.257 486.024 216.411 483.618 216.891C482.815 217.051 473.726 216.037 463.42 214.638C402.844 206.414 373.515 209.024 343.148 225.341C338.057 228.078 333.352 230.316 332.692 230.316C331.19 230.316 326.764 220.438 325.931 215.224C325.368 211.697 325.662 210.969 328.933 207.789C335.972 200.943 356.904 192.345 374.141 189.22C384.715 187.302 409.019 187.292 420.893 189.199ZM7.94901 235.228C6.36618 236.813 4.36026 240.508 3.49173 243.439C0.966308 251.953 -0.53129 273.779 0.174895 291.786C1.57712 327.566 8.43604 345.699 32.908 378.326C41.9676 390.404 46.151 394.24 49.69 393.713C54.1757 393.044 54.1767 391.347 49.693 363.773C41.2137 311.613 37.415 277.35 37.3754 252.669L37.3581 242L32.4027 238.618C22.2046 231.658 12.8142 230.357 7.94901 235.228ZM520.021 233.815C514.489 235.791 508.192 240.422 507.652 242.914C507.396 244.087 506.734 254.421 506.18 265.877C504.856 293.242 497.536 350.379 491.224 382.612C489.62 390.802 489.628 391.193 491.437 392.518C494.902 395.055 497.31 394.053 503.611 387.458C511.543 379.157 527.566 355.335 533.111 343.603C541.064 326.773 544.068 309.819 543.999 282.134C543.925 252.441 541.266 238.016 535.185 234.303C531.473 232.037 525.535 231.846 520.021 233.815Z"
                  fill="#60a5fa"
                />
              </svg>
            </span>
            <p
              class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
            >
              Diamond
            </p>
          </button>

          <button
            @click="selectFaceShape('Rectangular')"
            :class="{
    'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedFaceShape === 'Rectangular',
    'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedFaceShape !== 'Rectangular'
  }"
            class="flex w-full flex-col items-center justify-center rounded px-4 py-4 font-semibold dark:border-2 dark:border-slate-500 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500"
          >
            <span class="flex w-full justify-center">
              <svg
                class="mb-1 h-auto w-16"
                viewBox="0 0 544 606"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M196.033 0.21821C152.582 4.46045 123.005 15.7758 96.8812 38.1511C75.4794 56.4826 57.3514 89.8842 48.513 127.269C42.3057 153.529 39.6777 182.156 39.6777 223.519C39.6777 280.913 43.2193 317.963 55.086 384.713C61.8455 422.73 63.794 435.928 65.1528 452.89C67.025 476.256 69.6826 486.106 77.8935 500.101C86.9529 515.542 106.354 537.022 124.246 551.419C134.955 560.037 152.289 571.62 164.689 578.447C186.192 590.283 219.088 602.919 233.676 604.946C243.772 606.348 279.614 606.352 289.925 604.951C308.466 602.433 345.787 587.167 371.232 571.694C400.776 553.728 430.682 525.387 445.056 501.733C454.249 486.605 456.725 477.838 458.911 452.676C459.777 442.72 462.081 425.187 464.032 413.714C474.025 354.956 475.671 344.828 477.592 330.273C483.27 287.256 485.306 252.462 484.5 212.235C483.883 181.388 482.202 162.314 478.193 140.654C464.64 67.4377 428.459 23.5765 368.054 7.13665C343.07 0.337266 343.22 0.347441 268.353 0.0716805C230.818 -0.0656911 198.274 0.000450855 196.033 0.21821ZM168.578 194.794C193.182 200.941 209.784 210.289 209.784 217.994C209.784 222.055 206.201 231.929 204.094 233.677C202.413 235.071 203.02 235.31 188.393 227.485C178.676 222.286 165.31 217.995 151.894 215.766C136.366 213.187 107.719 214.118 75.4346 218.252C61.767 220.003 50.3913 221.242 50.155 221.006C49.172 220.024 71.0332 206.574 79.6353 202.87C89.7917 198.495 104.419 194.293 114.344 192.897C117.816 192.408 129.595 192.174 140.519 192.378C156.093 192.668 162.151 193.189 168.578 194.794ZM420.066 194.922C431.125 197.293 445.418 202.45 452.992 206.798C460.546 211.135 474.717 220.618 474.288 221.048C474.074 221.26 462.716 220.005 449.049 218.255C420.111 214.553 389.319 213.277 375.637 215.215C357.765 217.745 340.86 223.531 327.686 231.63C324.895 233.345 321.954 234.497 321.151 234.189C319.343 233.496 314.788 223.747 313.998 218.878C313.483 215.715 313.848 214.863 316.973 211.918C324.077 205.225 341.735 197.704 359.518 193.797C371.758 191.107 405.174 191.728 420.066 194.922ZM11.2547 231.84C5.3132 234.888 2.54566 242.767 0.983132 261.079C-1.10602 285.561 0.172327 309.627 4.45656 326.5C7.70894 339.307 13.4263 350.951 24.7114 367.75C35.1653 383.314 44.1544 393.362 47.6217 393.362C48.8553 393.362 49.8637 392.881 49.8637 392.293C49.8637 391.705 48.2594 381.853 46.2996 370.399C39.4638 330.467 35.1846 291.033 33.7851 255.074L33.0568 236.349L26.9452 234.095C18.4715 230.971 14.1587 230.35 11.2547 231.84ZM503.14 231.998C496.372 233.929 493.546 235.227 491.963 237.133C490.908 238.403 490.347 244.477 489.767 260.898C488.631 293.073 483.897 335.494 477.159 373.867C474.127 391.141 474.029 393.362 476.306 393.362C479.446 393.362 484.652 388.305 492.285 377.84C502.889 363.302 512.647 346.915 516.239 337.61C522.18 322.218 523.003 315.563 523 282.956C522.997 252.112 522.294 245.315 518.291 237.442C516.456 233.831 511.904 230.472 509.048 230.62C508.32 230.659 505.661 231.278 503.14 231.998Z"
                  fill="#60a5fa"
                />
              </svg>
            </span>
            <p
              class="mx-auto text-center text-gray-800 dark:text-gray-200 sm:text-base lg:text-xl"
            >
              Rectangular
            </p>
          </button>
          <!-- Repeat for each face shape, adjusting @click and :class bindings accordingly -->
        </div>
      </div>
    </div>

    <div x-show="currentStep === 5">
      <div class="mx-auto max-w-3xl text-center">
        <p
          class="text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
        >
          Select your preferred material:
        </p>
        <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-3">
          <!-- Plastic/Acetate Button -->
          <button
            @click="selectMaterial('Plastic'); nextStep();"
            :class="{
      'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedMaterial === 'Plastic',
      'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedMaterial !== 'Plastic'
    }"
            class="btn w-full rounded px-4 py-4 text-center font-semibold text-gray-800 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Plastic/Acetate</p>
          </button>

          <!-- Metal Button -->
          <button
            @click="selectMaterial('Metal'); nextStep();"
            :class="{
      'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedMaterial === 'Metal',
      'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedMaterial !== 'Metal'
    }"
            class="btn w-full rounded px-4 py-4 text-center font-semibold text-gray-800 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">Metal</p>
          </button>

          <!-- All Materials Button -->
          <button
            @click="selectMaterial(''); nextStep();"
            :class="{
      'bg-gray-50 shadow-md text-black hover:bg-gray-100 border-2 border-blue-600 dark:border-blue-500': selectedMaterial === '',
      'bg-white text-black hover:bg-gray-100 border-2 border-gray-400 dark:border-slate-500': selectedMaterial !== ''
    }"
            class="btn w-full rounded px-4 py-4 text-center font-semibold text-gray-800 dark:bg-slate-600 dark:text-gray-100 dark:hover:bg-slate-500 sm:text-base lg:text-xl"
          >
            <p class="mx-auto text-center">All Materials</p>
          </button>
        </div>
      </div>
    </div>

    <div x-show="currentStep === 6" class="">
      <div class="text-center">
        <div
          x-data="{ showModalColor: false }"
          class="flex items-center justify-center"
        >
          <!-- Trigger Button -->
          <div class="">
            <p
              class="flex max-w-2xl items-center text-lg font-semibold text-gray-700 dark:text-gray-200 lg:text-2xl"
            >
              Select your preferred colours:

              <button
                @click="showModalColor = true"
                class="ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-2 border-black p-3 font-semibold dark:border-gray-400"
              >
                ?
              </button>
            </p>
          </div>

          <!-- Modal -->
          <div
            x-show="showModalColor"
            class="fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
          >
            <!-- Modal Inner -->
            <div
              class="w-full overflow-hidden rounded-lg bg-white shadow md:w-1/2"
            >
              <!-- Close Button -->
              <div class="flex justify-end p-2">
                <button
                  @click="showModalColor = false"
                  class="text-black hover:text-gray-700 dark:text-gray-200"
                >
                  <svg
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    ></path>
                  </svg>
                </button>
              </div>
              <!-- Modal Content -->
              <div class="px-4 pb-8 text-left">
                <p class="pb-2 text-lg font-semibold lg:text-2xl">
                  Choosing the Right Frame Color:
                </p>
                <p class="text-black">
                  Selecting the right color for your glasses frames is crucial
                  as it enhances your overall appearance and ensures your
                  glasses complement your style. The color you choose can affect
                  how your complexion looks, match with different outfits, and
                  even reflect seasonal trends:
                </p>
                <ul class="mt-2 list-disc pl-5 text-black">
                  <li>
                    <strong>Skin Tone:</strong> Consider your skin's undertones.
                    Warmer undertones may look better with colors like gold,
                    brown, or warm reds, while cooler undertones are
                    complemented by black, silver, and pink frames.
                  </li>
                  <li>
                    <strong>Outfits:</strong> Think about your wardrobe.
                    Neutral-colored frames like black or gray offer versatility,
                    while bold colors like red or blue can add a pop of color to
                    a simple outfit.
                  </li>
                  <li>
                    <strong>Seasonal Choices:</strong> Lighter shades such as
                    pastels can be great for spring and summer, while richer
                    tones like burgundy or dark green might suit autumn and
                    winter better.
                  </li>
                </ul>
                <p class="mt-4 text-black">
                  Frame color isn’t just a matter of personal taste but also
                  functionality. Some colors may be better suited for certain
                  settings or times of day. Consulting with an eyewear
                  specialist can provide personalized advice to choose the best
                  color that matches your lifestyle and preferences.
                </p>
                <p class="mt-4">
                  <a
                    href="/how-to-choose-the-right-colour-frames"
                    class="text-blue-600 hover:text-blue-800"
                  >
                    Learn more
                  </a>
                  with our help frame colour guide!
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Wrap the color selection grid with a parent div with grid layout -->
        <div
          class="mx-auto grid max-w-4xl grid-cols-2 gap-2 pt-4 md:grid-cols-4"
        >
          <!-- Loop through each color to render individual color selectors -->
          <template x-for="color in colors" :key="color.name">
            <div
              x-show="!(selectedMaterial === 'Metal' && ['White', 'Grey', 'Brown', 'Tortoise', 'Green', 'Crystal', 'Purple / Violet'].includes(color.name))"
              :class="{
          'border-2 border-blue-600 dark:border-blue-500': selectedColors.includes(color.name),
          'border-2 border-gray-400 dark:border-slate-500': !selectedColors.includes(color.name)
        }"
              class="flex cursor-pointer items-center justify-start rounded p-2 hover:bg-gray-100 dark:hover:bg-slate-500"
              @click="toggleColorSelection(color.name)"
            >
              <div class="relative mr-2 h-8 w-8 flex-shrink-0">
                <div
                  class="h-full w-full rounded-full border-2"
                  :style="color.hex ? `background-color: ${color.hex};` : `background: url(${color.image}) no-repeat center center; background-size: cover;`"
                ></div>
              </div>
              <span
                class="font-medium text-gray-700 dark:text-gray-200"
                x-text="color.name"
              ></span>
            </div>
          </template>
        </div>
      </div>

      <!-- Continue and Skip Buttons -->
      <div class="pt-8 text-center">
        <button
          @click="sendFormDataToN8N"
          title="Submit to Add to Cart"
          class="focus:shadow-outline mx-2 w-64 rounded border-2 border-gray-300 bg-blue-900 px-6 py-2 font-bold text-white duration-500 ease-in-out hover:bg-gray-800 focus:outline-none dark:hover:bg-slate-900"
        >
          <span class="block min-w-fit px-1">Confirm & Add to Cart</span>
        </button>
      </div>
      <div
        class="mx-auto max-w-4xl pt-6 text-center text-lg text-gray-500 dark:text-gray-200"
      >
        You're almost there! Simply order your home trial kit, and we'll
        handpick the perfect frames based on your style preferences. Your
        choices have been sent to us, and we're ready to find the best options
        for you.
      </div>
    </div>
  </div>
</div>

<script>
  function quizApp() {
    return {
      currentStep: 0,
      totalSteps: 6,
      steps: Array.from({ length: 7 }, (_, i) => i),

      // Email field
      email: "",

      // Email validation logic
      get emailValid() {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailPattern.test(this.email);
      },

      // Quiz data
      selectedGender: "",
      selectedType: "",
      selectedFrameSize: "",
      selectedFaceShape: "",
      selectedMaterial: "",
      selectedColors: [],

      // Colors data
      colors: [
        { name: "Black", hex: "#000000" },
        { name: "White", hex: "#FFFFFF" },
        { name: "Grey", hex: "#969396" },
        { name: "Blue", hex: "#3575c4" },
        { name: "Brown", hex: "#662505" },
        {
          name: "Tortoise",
          image:
            "https://www.spex4less.com/media/mf_webp/png/media/wysiwyg/quiz/tortoise.webp",
        },
        {
          name: "Crystal",
          image:
            "https://www.spex4less.com/media/mf_webp/png/media/wysiwyg/quiz/clear.webp",
        },
        { name: "Gold", hex: "#d3aa31" },
      ],

      // Form progression logic
      get progressWidth() {
        return (this.currentStep / this.totalSteps) * 100;
      },

      nextStep() {
        if (this.currentStep < this.totalSteps && this.emailValid) {
          this.currentStep++;
        }
      },
      goToPreviousStep() {
        if (this.currentStep > 0) {
          this.currentStep--;
        }
      },

      // Form field selections
      selectGender(gender) {
        this.selectedGender = gender;
        this.nextStep();
      },
      selectType(type) {
        this.selectedType = type;
        this.nextStep();
      },
      selectFrameSize(size) {
        this.selectedFrameSize = size;
        this.nextStep();
      },
      selectFaceShape(shape) {
        this.selectedFaceShape = shape;
        this.nextStep();
      },
      selectMaterial(material) {
        this.selectedMaterial = material;
        this.nextStep();
      },
      toggleColorSelection(color) {
        const index = this.selectedColors.indexOf(color);
        if (index > -1) {
          this.selectedColors.splice(index, 1);
        } else {
          this.selectedColors.push(color);
        }
      },

      // Send form data to n8n webhook and include email
      sendFormDataToN8N() {
        const payload = {
          email: this.email, // Include email in payload
          gender: this.selectedGender,
          type: this.selectedType,
          frameSize: this.selectedFrameSize,
          faceShape: this.selectedFaceShape,
          material: this.selectedMaterial,
          colors: this.selectedColors,
        };

        // Send data to n8n webhook
        fetch("https://n8n.s4l.link/webhook/home-trial-quiz", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("Quiz results sent successfully");
          })
          .catch((error) => {
            console.error("Error sending quiz results:", error);
          });

        // Add product to cart
        document.querySelector("form#product_addtocart_form").submit();
      },
    };
  }
</script>