<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive product quiz to help you find the perfect product based on your preferences."
    />
    <title>Product Quiz</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/alpinejs@latest/dist/alpine.js"
      defer
    ></script>
  </head>

  <div
    x-data="{ showModal: false }"
    class="flex flex-col items-center justify-center pt-12"
  >
    <button
      type="button"
      class="justify-center rounded-md border border-blue-400 bg-white px-6 py-3 text-base text-blue-700 shadow-none transition hover:bg-white hover:shadow-lg focus:ring-blue-200 active:shadow disabled:border-slate-200 disabled:bg-white disabled:text-slate-600 disabled:opacity-70 disabled:shadow-none"
      @click="showModal = true"
    >
      Frame Quiz
    </button>

    <div
      x-show="showModal"
      class="fixed inset-0 overflow-y-auto bg-gray-600 bg-opacity-50"
      x-on:click.self="showModal = false"
    >
      <div
        class="relative mx-auto mt-12 w-1/2 rounded-xl border bg-white p-5 shadow-lg"
      >
        <button
          type="button"
          class="absolute right-0 top-0 mr-3 mt-2 rounded-full p-1 text-gray-800 hover:scale-125"
          @click="showModal = false"
        >
          X
        </button>
        <div x-data="quizApp()" class="space-y-6 rounded-lg p-4">
          <div class="text-center">
            <p class="text-lg font-semibold text-gray-700">
              Select your gender:
            </p>
            <div class="mx-auto mt-2 flex max-w-3xl justify-center gap-4">
              <button
                @click="selectGender('Mens')"
                class="btn focus:shadow-outline w-full rounded border-2 border-gray-400 px-4 py-2 font-bold hover:bg-gray-100 hover:text-black focus:outline-none"
                :class="{' bg-gray-200': selectedGender === 'Mens'}"
              >
                Mens
              </button>

              <button
                @click="selectGender('Womens')"
                class="btn focus:shadow-outline w-full rounded border-2 border-gray-400 px-4 py-2 font-bold hover:bg-gray-100 hover:text-black focus:outline-none"
                :class="{' bg-gray-200 ': selectedGender === 'Womens'}"
              >
                Womens
              </button>
            </div>
          </div>

          <div x-show="selectedGender" class="text-center">
            <p class="text-lg font-semibold text-gray-700">
              Select your face shape:
            </p>
            <div class="mx-auto mt-2 grid max-w-3xl grid-cols-3 gap-4">
              <button
                @click="selectFaceShape('Oval')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Oval'}"
              >
                <span class="mx-auto w-2/3 text-center">Oval</span>
                <span class="mx-auto flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Oval (1).png"
                    alt="Oval Face Shape"
                    class="mx-auto h-auto w-full"
                  />
                </span>
              </button>

              <button
                @click="selectFaceShape('Round')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Round'}"
              >
                <span class="w-2/3 px-2 text-center">Round</span>
                <span class="flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Round.png"
                    alt="Round Face Shape"
                    class="h-auto w-full"
                  />
                </span>
              </button>

              <button
                @click="selectFaceShape('Square')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Square'}"
              >
                <span class="w-2/3 px-2 text-center">Square</span>
                <span class="flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Square.png"
                    alt="Square Face Shape"
                    class="h-auto w-full"
                  />
                </span>
              </button>

              <button
                @click="selectFaceShape('Heart')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Heart'}"
              >
                <span class="w-2/3 px-2 text-center">Heart</span>
                <span class="flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Heart.png"
                    alt="Heart Face Shape"
                    class="h-auto w-full"
                  />
                </span>
              </button>

              <button
                @click="selectFaceShape('Diamond')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Diamond'}"
              >
                <span class="w-2/3 px-2 text-center">Diamond</span>
                <span class="flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Diamond.png"
                    alt="Diamond Face Shape"
                    class="h-auto w-full"
                  />
                </span>
              </button>

              <button
                @click="selectFaceShape('Rectangular')"
                class="focus:shadow-outline flex w-full items-center justify-between rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFaceShape === 'Regular'}"
              >
                <span class="w-2/3 px-2 text-center">Rectangular</span>
                <span class="flex w-1/3 items-center justify-end">
                  <img
                    src="../images/Rectangle.png"
                    alt="Regular Face Shape"
                    class="h-auto w-full"
                  />
                </span>
              </button>
            </div>
          </div>

          <div x-show="selectedFaceShape" class="text-center">
            <p class="text-lg font-semibold text-gray-700">
              Select your frame width/face size:
            </p>
            <div class="mx-auto mt-2 flex max-w-3xl justify-center gap-4">
              <button
                @click="selectFrameSize('115-130')"
                class="btn focus:shadow-outline w-full rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFrameSize === '115-130'}"
              >
                Small
              </button>
              <button
                @click="selectFrameSize('125-140')"
                class="btn focus:shadow-outline w-full rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFrameSize === '125-140'}"
              >
                Medium
              </button>
              <button
                @click="selectFrameSize('135-150')"
                class="btn focus:shadow-outline w-full rounded border-2 border-gray-400 bg-white px-4 py-2 font-bold text-gray-800 hover:bg-gray-100 focus:outline-none"
                :class="{'text-white bg-gray-200': selectedFrameSize === '135-150'}"
              >
                Large
              </button>
            </div>
          </div>

          <div x-show="selectedFaceShape" class="text-center">
            <h2 class="text-xl font-semibold text-gray-800">
              Recommended Styles for
              <span x-text="selectedFaceShape" class="text-blue-600"></span>
              Faces
            </h2>
            <div class="mx-auto mt-2 grid max-w-3xl grid-cols-3 gap-4">
              <template x-for="style in recommendedStyles" :key="style">
                <a
                  :href="`https://www.spex4less.com/all-frames?a1_frame_gender=${selectedGender}&a1_frame_style=${encodeURIComponent(style)}&width=${selectedFrameSize}`"
                  class="card rounded border-2 border-gray-400 bg-white px-4 py-2 font-semibold text-gray-800 shadow hover:bg-gray-100"
                  target="_blank"
                >
                  <p x-text="`Style: ${style}`" class="text-center"></p>
                </a>
              </template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function quizApp() {
      return {
        selectedGender: "",
        selectedFaceShape: "",
        selectedFrameSize: "",
        faceShapes: {
          Oval: {
            "115-130": ["Oval", "Cateye", "Round"],
            "125-140": ["Oversized", "Wayfarer", "Aviator"],
            "135-150": ["Regular", "Square", "Clubmaster"],
          },
          Round: {
            "115-130": ["Regular", "Square", "Keyhole"],
            "125-140": ["Regular", "Square", "Clubmaster"],
            "135-150": ["Regular", "Oversized", "Square"],
          },
          Square: {
            "115-130": ["Oval", "Round", "Cateye"],
            "125-140": ["Round", "Oval", "Cateye"],
            "135-150": ["Oval", "Round", "Aviator"],
          },
          Heart: {
            "115-130": ["Oval", "Round", "Cateye"],
            "125-140": ["Cateye", "Round", "Oval"],
            "135-150": ["Round", "Oval", "Cateye"],
          },
          Diamond: {
            "115-130": ["Oval", "Round", "Cateye"],
            "125-140": ["Oval", "Cateye", "Round"],
            "135-150": ["Oval", "Cateye", "Round"],
          },
          Rectangular: {
            "115-130": ["Round", "Oval", "Cateye"],
            "125-140": ["Round", "Oval", "Cateye"],
            "135-150": ["Oval", "Round", "Cateye"],
          },
        },

        recommendedStyles: [],
        selectGender(gender) {
          this.selectedGender = gender;
        },
        selectFaceShape(shape) {
          this.selectedFaceShape = shape;
          // Update recommendedStyles right after selecting a new face shape
          this.updateRecommendedStyles();
        },
        selectFrameSize(size) {
          this.selectedFrameSize = size;
          // Update recommendedStyles when selecting a new frame size (if necessary)
          this.updateRecommendedStyles();
        },
        updateRecommendedStyles() {
          if (this.selectedFaceShape && this.selectedFrameSize) {
            let styles =
              this.faceShapes[this.selectedFaceShape][this.selectedFrameSize];

            // Replace "Cateye" with "Regular" if the selected gender is "mens"
            if (this.selectedGender.toLowerCase() === "mens") {
              styles = styles.map((style) =>
                style.toLowerCase() === "cateye" ? "Regular" : style,
              );
            }

            this.recommendedStyles = styles;
          }
        },
      };
    }
  </script>
</html>